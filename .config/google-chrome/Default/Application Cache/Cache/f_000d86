DN.prototype.$V=Z(286,function(a){return this.k[a]||[]});$fb.prototype.$V=Z(285,function(){return[]});uI.prototype.Mba=Z(239,function(a){for(var b=Math.max(this.j.length,a.j.length),c=[],d=0;d<b;d++)c[d]=CI(this,d)|CI(a,d);return new uI(c,this.k|a.k)});
function Iqc(a,b){if(0==a.length)throw Error("number format error: empty string");var c=b||10;if(2>c||36<c)throw Error("radix out of range: "+c);if("-"==a.charAt(0))return xI(Iqc(a.substring(1),c));if(0<=a.indexOf("-"))throw Error('number format error: interior "-" character');for(var d=vI(Math.pow(c,8)),e=wI,f=0;f<a.length;f+=8){var h=Math.min(8,a.length-f),l=parseInt(a.substring(f,f+h),c);8>h?(h=vI(Math.pow(c,h)),e=BI(e,h).add(vI(l))):(e=BI(e,d),e=e.add(vI(l)))}return e}
function Jqc(a,b){for(var c=b>>5,d=b%32,e=a.j.length+c+(0<d?1:0),f=[],h=0;h<e;h++)f[h]=0<d?CI(a,h-c)<<d|CI(a,h-c-1)>>>32-d:CI(a,h-c);return new uI(f,a.k)}function Kqc(a){Ao(this,a,0,null)}B(Kqc,zo);function Lqc(a){Ao(this,a,0,Mqc)}B(Lqc,zo);var Mqc=[6];Lqc.prototype.ZC=function(){return null!=Co(this,4)?Co(this,4):"us"};function Nqc(a){Ao(this,a,0,null)}B(Nqc,zo);Nqc.prototype.getUrl=function(){return Co(this,2)};Nqc.prototype.Xy=function(){return Co(this,9)};function Oqc(a){Ao(this,a,0,Pqc)}B(Oqc,zo);var Pqc=[1];function Qqc(a,b,c,d){this.k=a;this.q=b;this.j=c;this.o=d}Qqc.prototype.getType=g("o");Qqc.prototype.getUrl=g("q");function Rqc(a,b,c){K.call(this);this.o=a;this.k=b;this.q=c;this.j={}}B(Rqc,K);var Sqc={1:"web",2:"drive"},Tqc={1:"document",2:"presentation",3:"spreadsheet",4:"drawing",7:"link"};
function Uqc(a,b){if(!Gd(Jd(),"docs-els")||!a.k||!mJ(a.q)||b.isEmpty())return em([]);var c=new Lqc;Do(c,2,Ja(b.j)?b.k:b.j);Do(c,1,0);Do(c,7,0);var d={},e=new Yl,f=eb();d.linksrequest=c.Wb();c=Oo(Ro(Qo(No(a.k.ne("/links"),d).Ve("id",a.o),1),e.callback,e),e.errback,e).Bd();a.j[f]=c;return bm(e,function(){delete this.j[f]},a).addCallback(Vqc)}
function Vqc(a){var b=[];if(!a)return b;a=new Oqc(a.Se());a=CT(a,Nqc,1);for(var c=0;c<a.length;++c){var d=a[c],e=Co(d,5),f=Sqc[Co(d,6)],h;h=d;h=null!=Co(h,7)?Co(h,7):0;h=Tqc[h];e&&f&&h&&b.push(new Qqc(e,d.getUrl(),f,h))}return b}Rqc.prototype.L=function(){for(var a in this.j)M(this.j[a]);Rqc.H.L.call(this)};function Wqc(a){return a=""+('<div class="docs-link-insertlinkbubble" dir="'+(a.xb?"rtl":"ltr")+'" tabIndex="1" role="dialog" aria-label="'+cu("Edit or Insert link")+'"><div class="docs-link-insertlinkbubble-leftpane">'+hu(a.$ua)+'</div><div class="docs-link-insertlinkbubble-rightpane">'+hu(a.Cya)+"</div></div>")}
function Xqc(a){return"<div>"+('<div class="docs-link-insertlinkbubble-urlholder" id="'+Y(a.df.jia)+'"><input type="text" class="docs-link-insertlinkbubble-url jfk-textinput" id="'+Y(a.df.Z2)+'" role="combobox" aria-haspopup="true" aria-autocomplete="list" aria-owns="'+Y(a.df.fG)+'" tabIndex="0"/><div class="docs-link-insertlinkbubble-linkchip" id="'+Y(a.df.Nga)+'"></div><div class="docs-link-insertlinkbubble-suggestionholder" id="'+Y(a.df.fG)+'" tabIndex="-1"></div></div>')+'<div class="docs-link-insertlinkbubble-buttonbar" id="'+
Y(a.df.$K)+'"></div><div class="docs-link-insertlinkbubble-error" id="'+Y(a.df.mga)+'" role="alert"></div></div>'}function Yqc(a){return a=""+('<label class="docs-link-insertlinkbubble-url-label" for="'+Y(a.df.Z2)+'">Link</label>')}function Zqc(a){return""+Wqc(Yt(a,{$ua:""+Yqc(a),Cya:""+Xqc(a)}))};function $qc(a,b){this.j=a;this.k=b}$qc.prototype.isEmpty=function(){return Ja(this.j+this.k)};$qc.prototype.equals=function(a){return null!=a&&this.k==a.k&&this.j==a.j};function B7(a){Im.call(this,a);this.o=new HI;this.Ia(this.o);this.o.Kq=!1;II(this.o,!1);this.o.j.XD=!0;$y(this.o.j,1,0,void 0,void 0)}B(B7,Im);B7.prototype.Ra=function(){B7.H.Ra.call(this);var a=this.getElement(),b=this.Q();this.Xa=b.X("DIV","docs-calloutbubble-anchor");b.appendChild(a,this.Xa);om(this.Xa,"docs-calloutbubble-anchor");this.o.uf("docs-calloutbubble-bubble");this.o.ni(this.Xa);this.o.render(a)};
B7.prototype.setVisible=function(a){if(a!=this.Qa()&&this.dispatchEvent(a?"show":"hide")){var b=this.getElement();b&&(Q(b,a),this.o.setVisible(a),this.o.lu())}};B7.prototype.Qa=function(){return this.o.Qa()};function arc(a,b,c){Ok(a.Xa,b,c);a.o.lu()};function brc(a){switch(a){case "document":return"Bookmark";case "presentation":return"Slide";case "spreadsheet":return"Spreadsheet";case "drawing":return"Drawing";case "link":return"Web link";case "bookmark":return"Bookmark";case "heading":return"Heading";case "slide":return"Slide"}return""};function crc(a){var b=""+W(a.SD),b='<div class="docs-link-linksuggestion" tabIndex="0" role="option">'+('<div class="docs-link-linksuggestion-icon">'+qD({icon:"docs-icon-img "+W(b)})+"</div>")+(a.cN?drc({WA:$t(""+W(a.WA)),cN:Zt(""+a.cN)}):drc({WA:$t(""+W(a.WA))}));a.url&&(b+='<a class="docs-link-linksuggestion-testlink" id="'+Y(a.df.Xha)+'" href="'+Y(eu(a.url))+'" target="_blank" rel="noreferrer" tabIndex="0" aria-label="'+cu("Open link in a new tab")+'">'+qD({icon:"docs-icon-img docs-icon-popout"})+
"</a>");return b+"</div>"}function drc(a){return Ut('<div class="docs-link-linksuggestion-text"><div class="docs-link-linksuggestion-title">'+W(a.WA)+"</div>"+(a.cN?'<div class="docs-link-linksuggestion-url">'+W(a.cN)+"</div>":"")+"</div>")};function erc(a){return a=""+('<div class="docs-link-chipselectedlinksuggestion">'+qD({icon:"docs-icon-img "+W(a.SD)})+drc({WA:$t(""+W(a.WA))})+'<div id="'+Y(a.df.D1)+'" class="docs-link-chipselectedlinksuggestion-hide" tabIndex="0" aria-role="button" aria-label="'+cu("Discard the currently selected suggestion")+'" role="button">'+qD({icon:"docs-icon-img docs-icon-close-small"})+"</div></div>")};function C7(a,b,c){Im.call(this,c);this.o=Ut(a);this.k=b;this.j=qW(this,frc)}B(C7,Im);var frc={D1:"dllsch"};C7.prototype.Ra=function(){var a={};a.df=this.j;a.WA=this.o;a.SD=this.k;this.aa=Pt(erc,a)};C7.prototype.Da=function(){C7.H.Da.call(this);var a=this.Q().getElement(this.j.D1);if(!a)throw Error("Hide element should have been found");wm(S(this),a,this.B)};C7.prototype.B=function(a){var b=this.getElement();Q(b,!1);this.dispatchEvent("hide");a.stopPropagation()};function D7(a,b){this.k=a;this.o=b}D7.prototype.equals=function(a){return this.o==a.o&&this.k.equals(ec(a.k))};
function grc(a){var b=wI;if(a instanceof uI){if(0!=a.k||0>DI(a,wI)||0<DI(a,hrc))throw Error("The address does not look like an IPv4.");b=ec(a)}else{if(!irc.test(a))throw Error(a+" does not look like an IPv4 address.");var c=a.split(".");if(4!=c.length)throw Error(a+" does not look like an IPv4 address.");for(var d=0;d<c.length;d++){var e=fb(c[d]);if(isNaN(e)||0>e||255<e||1!=c[d].length&&Ea(c[d],"0"))throw Error("In "+a+", octet "+d+" is not valid");e=vI(e);b=Jqc(b,8).Mba(e)}}D7.call(this,b,4)}
B(grc,D7);var irc=/^[0-9.]*$/,hrc=AI(Jqc(yI,32),yI);grc.prototype.toString=function(){if(this.j)return this.j;for(var a=y2a(this.k,0),b=[],c=3;0<=c;c--)b[c]=String(a&255),a>>>=8;return this.j=b.join(".")};
function jrc(a){var b=wI;if(a instanceof uI){if(0!=a.k||0>DI(a,wI)||0<DI(a,krc))throw Error("The address does not look like a valid IPv6.");b=ec(a)}else{if(!lrc.test(a))throw Error(a+" is not a valid IPv6 address.");var c=a.split(":");if(-1!=c[c.length-1].indexOf(".")){a=new grc(c[c.length-1]);a=y2a(ec(a.k),0);var d=[];d.push((a>>>16&65535).toString(16));d.push((a&65535).toString(16));Bb(c,c.length-1);Fb(c,d);a=c.join(":")}d=a.split("::");if(2<d.length||1==d.length&&8!=c.length)throw Error(a+" is not a valid IPv6 address.");
if(1<d.length){c=d[0].split(":");d=d[1].split(":");1==c.length&&""==c[0]&&(c=[]);1==d.length&&""==d[0]&&(d=[]);var e=8-(c.length+d.length);1>e?c=[]:(Fb(c,Pb("0",e)),Fb(c,d))}if(8!=c.length)throw Error(a+" is not a valid IPv6 address");for(d=0;d<c.length;d++){e=Iqc(c[d],16);if(0>DI(e,wI)||0<DI(e,mrc))throw Error(c[d]+" in "+a+" is not a valid hextet.");b=Jqc(b,16).Mba(e)}}D7.call(this,b,6)}B(jrc,D7);var lrc=/^([a-fA-F0-9]*:){2}[a-fA-F0-9:.]*$/,mrc=w2a(65535),krc=AI(Jqc(yI,128),yI);
jrc.prototype.toString=function(){if(this.j)return this.j;for(var a=[],b=3;0<=b;b--){var c=y2a(this.k,b),d=c&65535;a.push((c>>>16).toString(16));a.push(d.toString(16))}for(var c=b=-1,e=d=0,f=0;f<a.length;f++)"0"==a[f]?(e++,-1==c&&(c=f),e>d&&(d=e,b=c)):(c=-1,e=0);0<d&&(b+d==a.length&&a.push(""),a.splice(b,d,""),0==b&&(a=[""].concat(a)));return this.j=a.join(":")};var nrc=new CW("http https ftp feed gopher mailto mms news nntp rtsp telnet aim callto ichat".split(" "));
function orc(a){a=Ma(a);if(""==a)return null;if("#"==a.charAt(0))return a;try{var b=Sd(1,a);if(b){b=b.toLowerCase();if(!nrc.contains(b))return null;if("mailto"==b){var c=Td(a);a=a.replace(/^mailto/i,"mailto");return c&&ZMb(c).Vd()?a:null}}else a="http://"+a;a=encodeURI(a).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%25/g,"%");var d=Qd(a);return!prc(a)&&d&&qrc(d)?Od(Sd(1,a).toLowerCase(),Rd(Sd(2,a)),d.toLowerCase(),Number(Sd(4,a))||null,Sd(5,a),Sd(6,a),Gca(a)):null}catch(e){return null}}
function prc(a){return 2083<a.length}function qrc(a){var b;var c=a;try{b=Ea(c,"[")&&Fa(c,"]")?new jrc(c.substring(1,c.length-1)):new grc(c)}catch(d){b=null}if(b)return!0;a=a.replace(/[.\u3002\uFF0E\uFF61]/g,".");a=a.replace(/\.$/,"");if(253<a.length)return!1;a=a.split(".");if(127<a.length)return!1;for(b=0;b<a.length;b++)if(c=a[b],63<c.length||/[^0-9A-Za-z\-\_]/.test(c)||/[\-\_]$/.test(c)||/^[\-\_]/.test(c)||b==a.length-1&&/^\d/.test(c))return!1;return!0};function E7(a,b,c,d,e){Im.call(this,e);this.k=b;this.C=Ut(a);a=this.Q();this.G=a.hI(a.Hg(this.C.toString()));this.B=c;this.J=d;this.D=qW(this,rrc);this.j=null}B(E7,Im);var rrc={Xha:"dlstl"};t=E7.prototype;t.getType=g("J");t.getUrl=g("k");t.Q7=g("G");t.Ra=function(){E7.H.Ra.call(this);var a={};a.WA=this.C;a.SD=this.o();var b=this.B;if("infile"!=b){var c=orc(this.k);c&&(a.url=kBa(c))}"web"==b&&(a.cN=this.k);a.df=this.D;this.aa=Pt(crc,a,void 0,this.Q())};
t.Da=function(){E7.H.Da.call(this);(this.j=this.Q().getElement(this.D.Xha))&&wm(S(this),this.j,this.E6a);wm(S(this),this.getElement(),this.Y_a)};t.E6a=function(a){a.stopPropagation()};t.Y_a=function(a){if(a.altKey&&this.j)try{this.j.focus()}catch(b){}else{var c=new src(this.k,this.G,this.Q7(),this.B,0,this);this.dispatchEvent(c)}a.stopPropagation()};function src(a,b,c,d,e,f){N.call(this,"docs-link-suggestion-linkselect",f);this.url=a;this.q=d;this.j=b;this.C=c}B(src,N);function F7(a,b,c,d){E7.call(this,a,b,"infile",c,d)}B(F7,E7);F7.prototype.o=function(){var a=this.getType();switch(a){case "bookmark":return"docs-icon-bookmark";case "heading":return"docs-icon-paragraph";case "slide":return"docs-icon-presentation";default:throw Error("Unsupported Infile suggestions type encountered: "+a);}};F7.prototype.Q7=function(){var a=F7.H.Q7.call(this),b=this.getType();"slide"!=b&&(b=brc(b))&&(a=b+(": "+a));return a};function trc(a,b){this.k=a;this.j=b||null}trc.prototype.getUrl=g("k");trc.prototype.getText=g("j");function urc(a,b,c){a=new trc(a,b);b=Yo(new Xo,1);c&&Qra(b,c);T.WS.fireAction(a,b.xa())};function vrc(a){return a=""+('<div class="docs-link-linksuggestioncontentbox"><div class="docs-link-linksuggestioncontentbox-offlinenotice" id="'+Y(a.df.qha)+'">Some suggestions are not available offline.</div><div class="docs-link-linksuggestioncontentbox-statusbar" id="'+Y(a.df.Rha)+'"><div class="docs-link-linksuggestioncontentbox-statusmessage" id="'+Y(a.df.Sha)+'"></div><div class="docs-link-linksuggestioncontentbox-statusindicator" id="'+Y(a.df.Oga)+'"></div></div><div class="docs-link-linksuggestioncontentbox-suggestion-holder" id="'+
Y(a.df.fG)+'" role="listbox"></div>'+(a.Sdb?'<div class="docs-link-linksuggestioncontentbox-reference" id="'+Y(a.df.yha)+'" tabIndex="0">'+qD({icon:"docs-icon-img docs-icon-search-this-document"})+'<div class="docs-link-linksuggestioncontentbox-referencetext" id="'+Y(a.df.zha)+'"></div></div>':"")+"</div>")};function wrc(){};function G7(a,b){Im.call(this,a);this.k=b||"docs-loading-indicator";this.j=!0}B(G7,Im);G7.prototype.Ra=function(){G7.H.Ra.call(this);var a=this.getElement();om(a,this.k);this.Qa()||Q(a,!1)};G7.prototype.setVisible=function(a){if(this.j!=a&&this.dispatchEvent(a?"show":"hide")){var b=this.getElement();b&&Q(b,a);this.j=a}};G7.prototype.Qa=g("j");function xrc(a,b,c,d){E7.call(this,a,b,"drive",c,d)}B(xrc,E7);xrc.prototype.o=function(){switch(this.getType()){case "document":return"docs-icon-document";case "presentation":return"docs-icon-punch";case "spreadsheet":return"docs-icon-spreadsheet";case "drawing":return"docs-icon-drawing";default:return"docs-icon-file-blue"}};function yrc(a){return'<div class="docs-link-infilelinksuggestiongroup-cb">'+qD({icon:"docs-icon-img docs-zippy-open",sy:"docs-link-infilelinksuggestiongroup-cb-openarrow"})+qD({icon:"docs-icon-img docs-zippy-closed",sy:"docs-link-infilelinksuggestiongroup-cb-closearrow"})+'<div class="docs-link-infilelinksuggestiongroup-cb-title">'+W(a.title)+"</div></div"};function H7(a,b,c){Im.call(this,c);for(c=0;c<a.length;++c)this.Ia(a[c],!0);this.D=b;this.k=-1}B(H7,Im);t=H7.prototype;t.Ra=function(){H7.H.Ra.call(this);om(this.getElement(),"docs-link-linksuggestiongroup")};t.Da=function(){H7.H.Da.call(this);S(this).F(this.getElement(),"keydown",this.SNa)};t.SNa=function(a){if(dl(this.pb())){var b;switch(a.keyCode){case 38:b=-1;break;case 40:b=1;break;default:return}this.nba(this.k+b)&&(a.preventDefault(),a.stopPropagation())}};
t.nba=function(a){if(0>a||a==this.Sb())return!1;try{this.dc(a).getElement().focus(),this.k=a}catch(b){return!1}return!0};t.W5=function(){if(0<this.Sb())try{this.dc(0).getElement().focus(),this.k=0}catch(a){}};t.gV=function(){if(0<this.Sb())try{var a=this.Sb();this.dc(a-1).getElement().focus();this.k=a-1}catch(b){}};function I7(a,b,c){this.G=a;this.j=this.B=this.C=this.o=null;H7.call(this,b,"infile",c)}B(I7,H7);t=I7.prototype;t.Ra=function(){I7.H.Ra.call(this);var a=this.Q(),b=this.getElement();this.j=Pt(yrc,{title:this.G});this.o=a.X("DIV");this.C=new BM(this.j,this.o);a.appendChild(b,this.j);a.appendChild(b,this.o)};t.pb=function(){if(!this.o)throw Error("No suggestion holder found in infile link suggestion group");return this.o};
t.Da=function(){I7.H.Da.call(this);this.B||(this.B=new Fm(this.j),L(this,this.B));S(this).F(this.C,"toggle",this.n6a).F(this.j,"keypress",this.H_a).F(this.B,"focusout",this.UVa)};t.UVa=function(){qm(this.j,"docs-link-infilelinksuggestiongroup-cb-keyboardfocus")};t.H_a=function(a){13==a.keyCode&&(a.stopPropagation(),a.preventDefault())};t.n6a=function(a){sm(this.j,"docs-link-infilelinksuggestiongroup-cb-open",a.QC)};t.W5=function(){zrc(this)};t.gV=function(){this.C.Lw()?I7.H.gV.call(this):zrc(this)};
t.nba=function(a){var b=document.activeElement==this.j;return-1!=a||b?I7.H.nba.call(this,a):zrc(this)};function zrc(a){try{return a.j.focus(),om(a.j,"docs-link-infilelinksuggestiongroup-cb-keyboardfocus"),a.k=-1,!0}catch(b){}return!1};function Arc(a,b,c,d){E7.call(this,a,b,"web",c,d)}B(Arc,E7);Arc.prototype.o=q("docs-icon-web-result");function Brc(a){a=mb(a,Crc);a=Yaa(a,function(a){return a.B});var b=[];Tb(a,function(a,d){switch(d){case "infile":Fb(b,Drc(a));break;case "drive":case "web":b.push(new H7(a,d));break;default:throw Error("Unknow corpus type: "+d);}});return b}function Crc(a){var b=a.getUrl(),c=a.k,d=a.j;a=a.getType();switch(d){case "web":return new Arc(c,b,a);case "drive":return new xrc(c,b,a);case "infile":return new F7(c,b,a);default:throw Error("Unknown corpus: "+d);}}
function Drc(a){var b=[];a=Yaa(a,function(a){return a.getType()});Tb(a,function(a,d){b.push(new I7(Erc(d),a))});return b}function Erc(a){switch(a){case "bookmark":return"Bookmarks";case "heading":return"Headings";case "slide":return"Slides in this presentation";default:throw Error("Unknown infile suggestion type: "+a);}}function Frc(a,b){return Grc[a.D]-Grc[b.D]}function Hrc(a){if(!a)return!1;try{return!!Sd(1,a)&&!!Qd(a)}catch(b){return!1}}
function J7(a){var b;if(b=!!a)b=a.match("(?:mailto:)?([\\w.+-]+@[A-Za-z0-9.-]+\\.(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b)"),b=(null!=b?b[0]:"")==a;return b}function Irc(a){return Sd(1,a)?a.substring(a.indexOf(":")+1):a}var Grc={infile:0,web:1,drive:2};function Jrc(a){Im.call(this,a);this.B=qW(this,Krc);this.j=[];this.K=this.D=this.P=this.V=null;this.C=new G7(a,"docs-loading-indicator-small");this.Ia(this.C);this.J=new uD(this);this.J.jc(T.Oi,Bq,this.RNa);this.J.jc(T.rT,Bq,this.M3a);L(this,this.J);this.G=this.M=this.o=null;this.k=-1}B(Jrc,Im);var Krc={Oga:"dllscli",qha:"dllscon",yha:"dllscr",zha:"dllscrt",Rha:"dllscsb",Sha:"dllscsm",fG:"dllscsh"};t=Jrc.prototype;t.Ra=function(){var a={};a.df=this.B;a.Sdb=Gd(Jd(),"docs-ereft");this.aa=Pt(vrc,a)};
t.Da=function(){Jrc.H.Da.call(this);var a=this.Q();this.P=a.getElement(this.B.Rha);this.V=a.getElement(this.B.Sha);this.D=a.getElement(this.B.qha);this.K=a.getElement(this.B.fG);var b=a.getElement(this.B.Oga);b&&!this.C.getElement()&&this.C.render(b);Lrc(this,"i");if(this.o=a.getElement(this.B.yha))this.M=a.getElement(this.B.zha),wm(S(this),this.o,this.N3a);S(this).F(this.getElement(),"keydown",this.QNa);this.D&&Q(this.D,!T.Oi.isEnabled());Mrc(this)};t.RNa=function(){this.D&&Q(this.D,!T.Oi.isEnabled())};
t.M3a=function(){Mrc(this)};function Mrc(a){if(a.o){var b=Hrc(a.G),b=T.rT.isEnabled()&&!!a.G&&!b&&!J7(a.G);Q(a.o,b)}}t.QNa=function(a){var b=!1;switch(a.keyCode){case 40:b=Nrc(this,1);break;case 38:b=Nrc(this,-1)}b&&(a.preventDefault(),a.stopPropagation())};function Orc(a){if(a.o&&dl(a.o))try{return a.o.focus(),!0}catch(b){}return!1}
function Nrc(a,b){var c,d=document.activeElement==a.o;c=a.k+b;if(c>a.j.length||0>c)return a.k=-1,!1;if(c==a.j.length){if(d||!Orc(a))return a.k=-1,!1;a.k=a.j.length;return!0}1==b?a.j[c].W5():a.j[c].gV();a.k=c;return!0}t.N3a=function(a){var b=new wrc,c=Yo(new Xo,9).xa();T.rT.fireAction(b,c);a.stopPropagation()};
function Lrc(a,b){if(a.getElement()){var c=a.Q(),d=a.V,e=a.P;a.pb();switch(b){case "f":c.Of(d,"Unable to retrieve suggestions at this time.");Q(e,!0);Q(d,!0);a.C.setVisible(!1);break;case "i":Q(d,!1);Q(e,!1);a.C.setVisible(!1);break;case "s":c.Of(d,"Searching\u2026"),Q(e,!0),Q(d,!0),a.C.setVisible(!0)}}}t.pb=function(){if(this.K)return this.K;throw Error("Suggestion holder not found");};
function Prc(a,b,c){var d=[];if(c)Qrc(a);else{d=a.j;for(c=0;c<a.j.length;++c)a.removeChild(a.j[c],!0);a.j=[]}b=d=Db(d,b);Lb(b,Frc);d=b;for(c=0;c<d.length;++c)a.Ia(d[c],!0),a.j.push(d[c]);a.k=-1;a.pb().scrollTop=0}function Qrc(a){for(var b=0;b<a.j.length;++b)a.removeChild(a.j[b],!0),M(a.j[b]);a.j=[];a.k=-1}function Rrc(a,b){a.G=b;if(a.M){var c=a.Q();Mrc(a);b&&c.Of(a.M,"Find more")}};function K7(a,b,c,d){B7.call(this,d);this.Rh=a;this.j=new nU("Paste a link, or search",d);this.Ia(this.j);this.J=qW(this,Src);this.B=new Jrc(d);this.Ia(this.B);this.Va=kz("Apply",d);this.Ia(this.Va);this.P=new Zo(this.eS,200,this);L(this,this.P);this.Sg=!!c;this.Bb=null;this.V=!1;this.ba=this.G=this.D=null;this.Ib=!1;this.M=null;this.vd=!1;this.Na=this.C=null;this.He=!1}B(K7,B7);var Src={$K:"dlbbb",mga:"dlbem",Nga:"dlblc",fG:"dlbsh",jia:"dlbuh",Z2:"dlbui"},Trc=["mousedown","click","contextmenu","paste"];
t=K7.prototype;t.Ra=function(){K7.H.Ra.call(this);var a={df:{}};hc(a.df,this.J,this.Jna());a.xb=this.Sg;a=Pt(this.fma(),a);this.o.setContent(a)};t.fma=function(){return Zqc};t.Jna=function(){return{}};
t.initialize=function(){var a=this.Q(),b=a.getElement(this.J.Z2);if(!b)throw Error("URL input element should be present");this.j.Ta(b);this.D=a.getElement(this.J.fG);if(!this.D)throw Error("Suggestion holder element should be present");this.B.render(this.D);var c=a.getElement(this.J.$K);if(!c)throw Error("Button bar element should be present");this.Va.render(c);this.pg=new Hy(b);L(this,this.pg);this.vc=new Fm(this.o.pb());L(this,this.vc);this.zf=new Fm(b);L(this,this.zf);this.G=a.getElement(this.J.jia);
if(!this.G)throw Error("URL Holder element should have been present.");this.ng=new Fm(this.G);L(this,this.ng);b=this.o.pb().firstChild;this.Sc=new Fy(b,this.Q());L(this,this.Sc);Gy(this.Sc);this.Ed=new ku(this.getElement());L(this,this.Ed);this.Na=a.getElement(this.J.mga)};
t.Da=function(){K7.H.Da.call(this);this.vd||(this.initialize(),this.vd=!0);S(this).F(this.pg,"input",this.t7a).F(this.j.getElement(),"keydown",this.G_a).F(this.B,"docs-link-suggestion-linkselect",this.m6a).F(this.B.getElement(),"keydown",this.F_a).F(this.vc,"focusout",this.MNa).F(this.ng,"focusout",this.TYa).F(this.zf,"focusin",this.RYa).F(this.Va,"action",this.LNa).F(this.getElement(),Trc,this.PNa).F(this.D,"mousedown",this.j1a).F(this.Ed,"key",this.NNa).F(this.getElement(),"keyup",this.ONa);L7(this,
!1)};t.V$a=function(){var a=document.activeElement;this.Q().contains(this.G,a)||M7(this,!1)};t.j1a=function(){Ig(A(this.seb,this,document.activeElement),0)};t.seb=function(a){if(document.activeElement==this.D)try{a.focus()}catch(b){}};t.TYa=function(){Ig(this.V$a,0,this)};t.RYa=function(){this.eS();Urc(this,!1)};function Urc(a,b){rh(a.G,b);rh(a.j.getElement(),!b)}
t.G_a=function(a){if(a.target)switch(a.keyCode){case 38:var b=this.B;Orc(b)?b.k=b.j.length:0<b.j.length&&(b.j[b.j.length-1].gV(),b.k=b.j.length-1);a.stopPropagation();a.preventDefault();break;case 40:b=this.B,0<b.j.length?(b.j[0].W5(),b.k=0):Orc(b)&&(b.k=b.j.length),a.stopPropagation(),a.preventDefault()}};t.F_a=function(a){if(!a.Xa)switch(a.keyCode){case 40:case 38:N7(this),a.stopPropagation()}};
function M7(a,b,c){c&&(Qrc(a.B),a.M=null);a.D&&(b&&(b=a.B,b=dl(b.D)||dl(b.P)||0<b.j.length||!!b.o&&dl(b.o)),Q(a.D,b&&a.Q().contains(a.G,document.activeElement)))}t.x8a=function(){if(!this.isDisposed()){var a=this.o.pb();a&&this.Q().contains(a,document.activeElement)||this.setVisible(!1)}};t.MNa=function(){Ig(this.x8a,0,this)};t.PNa=function(a){a.stopPropagation()};t.ONa=function(a){27==a.keyCode&&(dl(this.D)?(N7(this),M7(this,!1),a.stopPropagation()):this.setVisible(!1))};
t.NNa=function(a){13==a.keyCode&&(L7(this,!orc(this.j.Z())),this.He?dl(this.D)&&M7(this,!1):this.L$(),a.stopPropagation())};t.LNa=function(){L7(this,!orc(this.j.Z()));dl(this.Na)||this.L$()};function Vrc(a){a.dispatchEvent(new Wrc(a))}t.Xca=function(a){this.j.Oa(a.url);O7(this);Xrc(this,a.C)||N7(this);this.ba=a.q;Vrc(this);M7(this,!1);L7(this,!1)};t.m6a=function(a){Urc(this,!0);this.Xca(a)};t.t7a=function(){Vrc(this);L7(this,!1);O7(this);this.ba=null;this.eS()};t.g4=function(){return Ma(this.j.Z())};
function L7(a,b){(a.He=b)&&a.q.Of(a.Na,prc(a.j.Z())?"Links must be less than 2083 characters long":"Link doesn't look right. Typo?");a.Na&&Q(a.Na,b);sm(a.j.getElement(),"docs-link-insertlinkbubble-url-error",b)}function O7(a){a.Va.ga(""!=a.j.Z())}
function Xrc(a,b){var c=a.Q().getElement(a.J.Nga);if(!c)return!1;var d=a.j.Z();if("#"!=d.charAt(0))return!1;for(var e=!1,f=Brc([]),h,l=0;l<f.length&&!h;++l)a:{h=f[l];for(var m=d,n=h.Sb(),p=0;p<n;++p){var r=h.dc(p);if(r.getUrl()==m){h=r;break a}}h=null}h&&h instanceof F7&&(b&&lm(c,"Link selected: "+b),Q(a.j.getElement(),!1),d=h,d=new C7(d.C.toString(),d.o(),d.Q()),a.C=d,a.Ia(a.C),a.C.render(c),document.activeElement!=a.j.getElement()&&a.wna(),vm(S(a),a.C,"hide",a.EVa),e=!0);og(f);return e}
t.EVa=function(){Yrc(this);N7(this)};function Yrc(a){a.C&&(a.removeChild(a.C,!0),a.C.dispose(),Q(a.j.getElement(),!0),a.j.clear(),O7(a),a.C=null)}function Zrc(a){a=a.j.Z();if(J7(a))return Sd(1,a)?a:"mailto:"+a;if(!orc(a))throw Error("Insert link called with invalid URL");if(jBa(a)){var b=Rd(Gca(a));b&&(a="#"+b)}return a}t.fV=function(){var a=new Fq,b=new Kqc;switch(this.ba){case "web":Do(b,4,0);break;case "drive":Do(b,4,1);break;case "infile":Do(b,4,2)}Do(b,2,this.Ib);Fo(a,18,b);return a};
t.L$=function(){var a=Zrc(this);this.setVisible(!1);urc(a,void 0,this.fV())};t.UV=function(){return new $qc(this.j.Z(),"")};
t.eS=function(){var a;(a=this.C)||(a=this.j.Z(),a=Hrc(a)||J7(a));if(a)M7(this,!1),this.P.stop();else if(a=this.UV(),Rrc(this.B,this.g4()),a.equals(this.M))Lrc(this.B,"i"),M7(this,!0),this.P.stop();else if(M7(this,!0,!0),a.equals(this.Bb)){Lrc(this.B,"s");var b=Brc([]);$rc(this);Prc(this.B,b,!0);M7(this,!0);this.M=null;$l(Uqc(this.Rh,a),za(this.Jra,a),za(this.Jra,a,[]),this);this.P.stop()}else this.Bb=a,this.P.start()};
t.Jra=function(a,b){var c=Brc(b);!this.M&&a.equals(this.UV())&&(this.M=a,$rc(this),Prc(this.B,c,!1),Lrc(this.B,"i"),M7(this,!0))};function $rc(a){if(document.activeElement!=a.j.getElement())try{Urc(a,!0),a.G.focus()}catch(b){}}t.wna=function(){try{this.G&&this.G.focus()}catch(a){}};t.reset=function(){this.j.reset();O7(this);this.Ib=!1;this.ba=null;Vrc(this);Yrc(this);M7(this,!1,!0);this.M=null;Rrc(this.B,null)};
t.setVisible=function(a,b){K7.H.setVisible.call(this,a);b&&this.reset();a?(L7(this,!1),this.eS()):this.Bb=null};function N7(a){try{dl(a.j.getElement())?a.j.gj():$rc(a)}catch(b){}}function Wrc(a){N.call(this,"uu",a)}B(Wrc,N);function asc(a){var b;b=""+('<label id="'+W(a.df.Yha)+'" class="docs-link-insertlinkbubble-text-label" for='+W(a.df.P2)+">Text</label>");return""+Wqc(Yt(a,{$ua:""+b+Yqc(a),Cya:""+('<input type="text" class="docs-link-insertlinkbubble-text jfk-textinput" id="'+W(a.df.P2)+'"/>')+Xqc(a)}))};function P7(a,b,c,d){K7.call(this,a,0,c,d);this.k=new nU(void 0,d);this.Ia(this.k);this.yb=null;this.fb=qW(this,bsc);this.Ua=this.jb=!1;this.K=null}B(P7,K7);var bsc={P2:"dlbti",Yha:"dlbtil"},csc=["footnote","horizontal_rule"],dsc=["inline"];t=P7.prototype;t.fma=function(){return asc};t.Jna=g("fb");
t.initialize=function(){P7.H.initialize.call(this);var a=this.Q();this.K=a.getElement(this.fb.P2);if(!this.K)throw Error("No input element found");this.k.Ta(this.K);this.bc=new Hy(this.K);L(this,this.bc);this.yb=a.getElement(this.fb.Yha)};t.Da=function(){P7.H.Da.call(this);S(this).F(this.bc,"input",this.iUa)};t.iUa=function(){this.Ua=!0};t.g4=function(){var a=P7.H.g4.call(this);return a?a:this.k.isEnabled()?Ma(this.k.Z()):null};
t.L$=function(){var a=Zrc(this),b;this.k.isEnabled()&&(b=this.k.Z(),Ja(Ma(b))&&(b=J7(a)?Irc(a):a),this.k.Oa(b));this.setVisible(!1);urc(a,b,this.fV())};t.UV=function(){var a=P7.H.UV.call(this);if(this.k.isEnabled())var b=this.k.Z(),a=new $qc(a.j,b);return a};
t.setContent=function(a,b,c){if(null!=b){b&&(this.Ua=!0);this.jb=!!b;c=c?esc(c):!0;var d=!(!b.match(Nka)&&!b.match(Mka));!d&&c||this.k.ga(!1);c?d?this.k.Oa("Cannot edit multi-paragraph selection."):(Q(this.k.getElement(),!0),Q(this.yb,!0),this.k.ga(!0),this.k.Oa(b)):(Q(this.k.getElement(),!1),Q(this.yb,!1));this.V|=1}null!=a&&(this.ba=null,""!=a&&(this.Ib=!0,a=iBa(a),J7(a)&&(a=Irc(a))),this.j.Oa(a),O7(this),Xrc(this),Vrc(this),L7(this,!1),this.V=!0);this.V&&(this.eS(),this.V=!1)};
t.wna=function(){try{this.K&&this.K.focus()}catch(a){}};t.Xca=function(a){P7.H.Xca.call(this,a);this.k.isEnabled()&&!this.Ua&&a.j&&this.k.Oa(a.j)};t.fV=function(){var a=P7.H.fV.call(this),b=Eo(a,Kqc,18);Do(b,1,this.jb);var c=this.k.isEnabled()&&this.k.Z();c&&(c=c==Zrc(this),Do(b,3,c));return a};t.reset=function(){P7.H.reset.call(this);this.Ua=!1;this.k.ga(!0);this.jb=!1;Q(this.k.getElement(),!0);this.k.reset()};
function esc(a){var b=a.wm().getSelection().ORb();if(!b)return!0;a=bgb(a.getModel(),b.on(),cA(b));for(var b=a.zK,c=0;c<b.length;++c)if(b[c].mD().getArray().length&&sb(csc,b[c].getType()))return!1;for(c=0;c<dsc.length;++c)if(0<a.$V(dsc[c]).length)return!1;return!0};function fsc(a,b,c,d,e,f,h,l){this.C=e;this.k=b;this.D=c;this.o=d;this.q=new Rqc(a,f,l);this.B=h;this.j=null;T.WS.ga(!0);this.O=new R(this);T.WS.subscribe("action",this.Yta,this)}B(fsc,K);t=fsc.prototype;
t.kkb=function(){Ue&&ZE(this.o).ga(!1);this.j||(this.j=new P7(this.q,0,Xe(ye.getInstance())),this.j.render(this.o.Vy()),this.O.F(this.j,"hide",this.jkb).F(this.j.getElement(),"mouseup",this.lkb));var a=VE(this.o);a&&a.fF(!0);this.j.setVisible(!0,!0);var b=Gv(this.k),a=wv(this.k,b);if(Ue){var b=a.getRawValue(this.k.mb(),b.y,b.x),c=a.getRawHyperlink();this.j.setContent(vq(b)?c:b,a.getDisplayValue())}else this.j.setContent(a.getRawHyperlink(),a.getDisplayValue());gsc(this)};
function gsc(a){if(a.j.Qa()){var b=zv(a.k,Gv(a.k)),c=ky(a.o.j,b),b=$x(a.o.j,yf(b,"r"),"r");arc(a.j,c.left,c.top+b);Ig(function(){N7(this.j);this.B.j(2)},0,a)}}
t.Yta=function(a){var b=a.getUrl();if(b){"#"==b[0]&&(b=Hca(window.location.href,b.substring(1)));var b=b.replace('"','""'),c=a.getText(),c=c?c.replace(/"/g,'""'):b,d=new MK(this.k,Hv(this.k),!1);this.C.Ob(d);a=Gv(this.k);Ue&&b==c?d=YXa(this.k,a,b):(b='=HYPERLINK("'+b+'"'+SUa(this.D)+'"'+c+'")',d=new CF(this.k,a,b));this.C.Ob(d);b="Link inserted in "+($s(a)+".");Jn(b);T.Jo.ga(!0)}};t.jkb=function(a){a.target==this.j&&(Ue&&ZE(this.o).ga(!0),this.B.j(3))};
t.L=function(){T.WS.unsubscribe("action",this.Yta,this);M(this.j);this.q.dispose();fsc.H.L.call(this)};t.lkb=function(a){a.stopPropagation()};function hsc(){K.call(this)}B(hsc,vn);hsc.prototype.j=function(){return fsc};Dn("links",hsc);
